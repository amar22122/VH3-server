name: Minecraft Server

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ⬇️ تحميل ملفات السيرفر من Google Drive باستخدام gdown
        run: |
          sudo apt update
          sudo apt install -y python3-pip unzip
          pip install gdown

          echo "🔗 تحميل السيرفر..."
          gdown --id 1zGrOsFwJUhE8jH2sDwD4okJqxDRtr-_H -O server.zip

          ls -lh server.zip
          unzip server.zip -d server || { echo "فك الضغط فشل"; exit 1; }
          cd server

          echo "✅ تم فك الضغط، نبدأ تشغيل السيرفر..."
          chmod +x ./start.sh || true
          java -Xmx6G -Xms2G -jar forge*.jar nogui || { echo "تشغيل السيرفر فشل"; exit 1; }
          
