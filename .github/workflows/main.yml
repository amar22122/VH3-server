name: Minecraft Server

on:
  workflow_dispatch:

jobs:
  start-server:
    runs-on: ubuntu-latest

    steps:
      - name: ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
        run: |
          sudo apt update
          sudo apt install -y unzip python3-pip curl
          pip install gdown

      - name: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ù† Google Drive
        run: |
          echo "ğŸ“¥ ØªØ­Ù…ÙŠÙ„ VH3.zip Ù…Ù† Google Drive..."
          gdown --id 1JoEfaDE1nQjGNTE_Wl6Yx0MeRBdtoF7M -O VH3.zip

      - name: ÙÙƒ Ø§Ù„Ø¶ØºØ·
        run: |
          unzip VH3.zip

      - name: ØªØ´ØºÙŠÙ„ Playit.gg
        run: |
          echo "ğŸŒ ØªØ­Ù…ÙŠÙ„ playit..."
          curl -Lo playit https://github.com/playit-cloud/playit-agent/releases/latest/download/playit-linux-amd64
          chmod +x playit
          nohup ./playit &

      - name: ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±
        run: |
          echo "ğŸš€ Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±..."
          JAR_FILE=$(ls forge-*.jar | head -n 1)
          if [ -z "$JAR_FILE" ]; then
            echo "âŒ Ù…Ø§ ÙˆØ¬Ø¯Ù†Ø§ Ù…Ù„Ù .jar Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±"
            exit 1
          fi
          java -Xmx4G -Xms2G -jar "$JAR_FILE" nogui
